%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Estonian Information Technology College stylepackage %%%%
%%%%           Tarvo Reinpalu <latex@trv.im>              %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%
% Constants %
%%%%%%%%%%%%%
\def\university{ESTONIAN INFORMATION TECHNOLOGY COLLEGE}
\def\title#1{\gdef\@title{#1}}
\def\paper#1{\gdef\@paper{#1}}
\def\author#1{\gdef\@author{#1}}
\def\curriculum#1{\gdef\@curriculum{#1}}
\def\supervisor#1{\gdef\@supervisor{#1}}
\def\consultant#1{\gdef\@consultant{#1}}

%%%%%%%%%%%%%%%%%%%%%%
% Base configuration %
%%%%%%%%%%%%%%%%%%%%%%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{itk_thesis_eng}[20/02/2017 - Estonian IT College Style Package]

%%%%%%%%%%%%%%%%%%%%
% Style parameters %
%%%%%%%%%%%%%%%%%%%%
\usepackage[hmargin={3.1cm, 2.54cm},vmargin=3.17cm]{geometry}
\brokenpenalty=10000
\usepackage{scrpage2}
\ifoot[]{}
\cfoot[]{}
\ofoot[\pagemark]{\pagemark}
\pagestyle{scrplain}

%%%%%%%%%%%%%%
% Title page %
%%%%%%%%%%%%%%
\def\itkTitlePage{\newpage}
\def\enditkTitlePage{\itkMakeTitlePage}

\def\itkMakeTitlePage{
	\thispagestyle{empty}
	\centering

	{\LARGE\MakeUppercase {\university} \par}
	\vskip2in
	{\Large \@author \par}
	{\LARGE\MakeUppercase {\@title} \par}
	\vskip.5in
	{\Large {\@paper} \par}
	\vskip.5in
	{\large\textbf {\MakeUppercase \@curriculum} \par}
	\vfill
	\begin{flushright}
		{\large Supervisor: \@supervisor \par}
		{\large Consultant: \@consultant \par}
	\end{flushright}
	\vfill
	{\large {Tallinn \the\year} \par}}

%%%%%%%%%%%%%%%%%%%%%%
% Author declaration %
%%%%%%%%%%%%%%%%%%%%%%
\def\itkMakeAuthorDeclaration{
	\newpage
	\thispagestyle{empty}

	{\Large\textbf {\centerline {AUTORIDEKLARATSIOON}} \par}

	\vskip.5in

	\begin{flushleft}
		Deklareerin, et käesolev diplomitöö, mis on minu iseseisva töö tulemus, on esitatud Eesti Infotehnoloogia Kolledžile lõpudiplomi taotlemiseks IT Süsteemide arendamise erialal.  Diplomitöö alusel ei ole varem eriala lõpudiplomit taotletud.
	\end{flushleft}

	\vskip1.5in

	\begin{flushleft}
		\begin{tabular}{p{8.0cm}p{4.0cm}}
			Autor: \@author & ..............................\\
			& (allkiri ja kuupäev)  \\
			Töö vastab kehtivatele nõuetele &  \\	
			Juhendaja: \@supervisor & ..............................\\
			& (allkiri ja kuupäev) \\
		\end{tabular}
	\end{flushleft}}

%%%%%%%%%%%%%%%%%%%%%
% Introduction page %
%%%%%%%%%%%%%%%%%%%%%
\def\introduction#1{
	\section*{#1}
	\addcontentsline{toc}{section}{#1}}

\def\introductionSubsection#1{
	\subsection*{#1}
	\addcontentsline{toc}{subsection}{#1}}

%%%%%%%%%%%%%%%%%%%
% Image inclusion %
%%%%%%%%%%%%%%%%%%%
\usepackage{float}
\usepackage{graphicx}

\def\itkIncludeImage#1#2{
	\begin{figure}[H]
	\leavevmode
	\includegraphics[width=0.8\textwidth]{#1}
	\caption{#2}
	\end{figure}}

%%%%%%%%%%%%%%%%%%
% Table captions %
%%%%%%%%%%%%%%%%%%
\usepackage{caption}
\captionsetup[table]{
  labelsep=newline,
  justification=raggedleft,
  singlelinecheck=false,
  labelsep=newline,
  labelfont=bf,
  skip=8pt}

%%%%%%%%%%%%%%%%%%%%%
% Listings captions %
%%%%%%%%%%%%%%%%%%%%%
\captionsetup[listing]{
  labelsep=colon,
  name=Code,
  justification=raggedright,
  singlelinecheck=false,
  font=bf,
  labelfont=bf,
  skip=4pt}

%%%%%%%%%%%%%%%%%%%
% Figure captions %
%%%%%%%%%%%%%%%%%%%
\captionsetup[figure]{
  labelsep=space,
  name=Figure,
  justification=raggedright,
  singlelinecheck=false,
  font=bf,
  labelfont=bf,
  skip=4pt}
